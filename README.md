# ë‹¤ë‹ˆì—˜ê¸°ë„íšŒ ë‰´ìŠ¤ ìë™ ìˆ˜ì§‘ ì‹œìŠ¤í…œ

Christian Today ë‹¤ë‹ˆì—˜ê¸°ë„íšŒ ë‰´ìŠ¤ ìë™ ê°ì§€ ë° ì €ì¥ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

ì´ í”„ë¡œì íŠ¸ëŠ” **ë°±ì—”ë“œ(Backend) + í”„ë¡ íŠ¸ì—”ë“œ(Frontend)** ë¶„ë¦¬ êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- **Backend (Render)**: FastAPI ê¸°ë°˜ REST API ì„œë²„
- **Frontend (Vercel)**: ì •ì  HTML/CSS/JS í´ë¼ì´ì–¸íŠ¸

## ğŸŒŸ ê¸°ëŠ¥

- **ìë™ ë‰´ìŠ¤ ê°ì§€**: Christian Today ë‹¤ë‹ˆì—˜ê¸°ë„íšŒ ì„¹ì…˜ì—ì„œ ìƒˆë¡œìš´ ê¸°ì‚¬ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€
- **ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥**: SQLiteë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ì‚¬ URLê³¼ ì œëª©ì„ ì €ì¥
- **AI ìš”ì•½ ìƒì„±**: OpenAI GPTë¥¼ í™œìš©í•œ ê¸°ì‚¬ ìš”ì•½, í‚¤ì›Œë“œ ì¶”ì¶œ, ì„±ê²½ êµ¬ì ˆ ì¶”ì²œ
- **ì›¹ ì¸í„°í˜ì´ìŠ¤**: ê¹”ë”í•˜ê³  ë°˜ì‘í˜• ì›¹ UIë¡œ ì €ì¥ëœ ê¸°ì‚¬ ëª©ë¡ í‘œì‹œ
- **ìˆ˜ë™ í™•ì¸**: ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ìƒˆë¡œìš´ ê¸°ì‚¬ë¥¼ ì¦‰ì‹œ í™•ì¸
- **REST API**: JSON APIë¡œ ê¸°ì‚¬ ë°ì´í„° ì ‘ê·¼ ê°€ëŠ¥
- **ë¶„ë¦¬ ë°°í¬**: ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ ë° í™•ì¥

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
daniel-crawl-web/
â”œâ”€â”€ backend/              # Render ë°°í¬ìš© (API ì„œë²„)
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ index.py      # FastAPI API ì„œë²„
â”‚   â”œâ”€â”€ db.py             # SQLite ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”œâ”€â”€ scraper.py        # ì›¹ ìŠ¤í¬ë˜í•‘ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ requirements.txt  # Python ì˜ì¡´ì„±
â”‚   â””â”€â”€ render.yaml       # Render ë°°í¬ ì„¤ì •
â”œâ”€â”€ frontend/             # Vercel ë°°í¬ìš© (í´ë¼ì´ì–¸íŠ¸)
â”‚   â”œâ”€â”€ index.html        # ë©”ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ style.css         # ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”‚   â”œâ”€â”€ script.js         # í´ë¼ì´ì–¸íŠ¸ ë¡œì§
â”‚   â””â”€â”€ vercel.json       # Vercel ë°°í¬ ì„¤ì •
â””â”€â”€ README.md             # ì´ íŒŒì¼
```

## ğŸš€ ë°°í¬ ë°©ë²•

### 1ë‹¨ê³„: ë°±ì—”ë“œ ë°°í¬ (Render)

1. **Render ê³„ì • ìƒì„± ë° ë¡œê·¸ì¸**
   - [render.com](https://render.com)ì—ì„œ ê³„ì • ìƒì„±

2. **GitHub ì €ì¥ì†Œ ì—°ê²°**
   - ì´ í”„ë¡œì íŠ¸ë¥¼ GitHubì— í‘¸ì‹œ

3. **Renderì—ì„œ ìƒˆ ì›¹ ì„œë¹„ìŠ¤ ìƒì„±**
   - **Service**: "Web Service"
   - **Repository**: ë‹¹ì‹ ì˜ GitHub ì €ì¥ì†Œ
   - **Branch**: `main` (ë˜ëŠ” ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜)
   - **Root Directory**: `backend`

4. **ì„¤ì • êµ¬ì„±**
   ```yaml
   # render.yaml ë‚´ìš©
   services:
     - type: web
       name: daniel-prayer-api
       runtime: python3
       buildCommand: pip install -r requirements.txt
       startCommand: uvicorn api.index:app --host 0.0.0.0 --port $PORT
   ```

5. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •** (ì„ íƒì‚¬í•­)
   - `PYTHON_VERSION`: `3.9`

6. **ë°°í¬ ì™„ë£Œ ëŒ€ê¸°**
   - Renderì—ì„œ ìë™ìœ¼ë¡œ ë¹Œë“œ ë° ë°°í¬
   - `https://your-service-name.onrender.com` í˜•ì‹ì˜ URL ì œê³µ

### 2ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ (Vercel)

1. **Vercel CLI ì„¤ì¹˜**
   ```bash
   npm install -g vercel
   ```

2. **Vercel ë¡œê·¸ì¸**
   ```bash
   vercel login
   ```

3. **í”„ë¡ íŠ¸ì—”ë“œ í´ë”ì—ì„œ ë°°í¬**
   ```bash
   cd frontend
   vercel --prod
   ```

4. **ë°°í¬ ì„¤ì •**
   - **Project Name**: ì›í•˜ëŠ” í”„ë¡œì íŠ¸ ì´ë¦„ ì…ë ¥
   - **Directory**: `./` (í˜„ì¬ ë””ë ‰í† ë¦¬)

5. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
   - ë°°í¬ í›„ Vercel ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€:
   - `API_BASE_URL`: `https://your-render-service.onrender.com`

### 3ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ API URL ì—…ë°ì´íŠ¸

`frontend/script.js` íŒŒì¼ì—ì„œ API_BASE_URLì„ ì‹¤ì œ Render URLë¡œ ë³€ê²½:

```javascript
// ë³€ê²½ ì „
const API_BASE_URL = 'http://localhost:8000';

// ë³€ê²½ í›„
const API_BASE_URL = 'https://your-service-name.onrender.com';
```

ë³€ê²½ í›„ ë‹¤ì‹œ Vercelì— ì¬ë°°í¬:
```bash
cd frontend
vercel --prod
```

## ğŸ”§ ë¡œì»¬ ê°œë°œ í™˜ê²½

### ë°±ì—”ë“œ ë¡œì»¬ ì‹¤í–‰

1. **ì˜ì¡´ì„± ì„¤ì¹˜**
   ```bash
   cd backend
   pip install -r requirements.txt
   ```

2. **ì„œë²„ ì‹¤í–‰**
   ```bash
   python -m uvicorn api.index:app --reload --host 0.0.0.0 --port 8000
   ```

### í”„ë¡ íŠ¸ì—”ë“œ ë¡œì»¬ ì‹¤í–‰

1. **ê°„ë‹¨í•œ HTTP ì„œë²„ ì‹¤í–‰**
   ```bash
   cd frontend
   # Pythonì´ ì„¤ì¹˜ëœ ê²½ìš°
   python -m http.server 3000

   # ë˜ëŠ” Node.jsê°€ ì„¤ì¹˜ëœ ê²½ìš°
   npx serve .
   ```

2. **ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†**
   ```
   http://localhost:3000
   ```

**ì°¸ê³ **: ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•  ë•ŒëŠ” `frontend/script.js`ì˜ `API_BASE_URL`ì„ `http://localhost:8000`ìœ¼ë¡œ ìœ ì§€í•˜ì„¸ìš”.

## ğŸ”§ API ì—”ë“œí¬ì¸íŠ¸

### REST API (Backend)
- `GET /check` - ìƒˆë¡œìš´ ê¸°ì‚¬ í™•ì¸ ë° ì €ì¥
- `GET /latest?limit=10` - ìµœê·¼ ê¸°ì‚¬ ëª©ë¡ (JSON)
- `GET /stats` - ì €ì¥ëœ ê¸°ì‚¬ í†µê³„
- `GET /health` - ì„œë²„ ìƒíƒœ í™•ì¸
- `GET /summaries` - ìš”ì•½ëœ ê¸°ì‚¬ ëª©ë¡
- `POST /summarize` - ìƒìœ„ ê¸°ì‚¬ë“¤ ìš”ì•½ ìƒì„±
- `GET /summary/{article_url}` - íŠ¹ì • ê¸°ì‚¬ ìš”ì•½ ì¡°íšŒ

### ì‘ë‹µ ì˜ˆì‹œ

**GET /check**
```json
{
  "success": true,
  "message": "3ê°œì˜ ìƒˆë¡œìš´ ê¸°ì‚¬ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.",
  "new_articles": [
    {
      "url": "https://www.christiantoday.co.kr/news/123456",
      "title": "ë‹¤ë‹ˆì—˜ê¸°ë„íšŒ 11ì¼ì°¨ ì†Œì‹"
    }
  ],
  "total_found": 15,
  "checked_at": "2025-11-13 21:30:00"
}
```

**GET /stats**
```json
{
  "total_articles": 25,
  "last_updated": "2025-11-13T21:30:00.000000",
  "source_url": "https://www.christiantoday.co.kr/sections/pd_19"
}
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Backend**: FastAPI (Python)
- **Database**: SQLite
- **Web Scraping**: BeautifulSoup4 + Requests
- **Frontend**: HTML + CSS + JavaScript (Vanilla)
- **Backend Deployment**: Render
- **Frontend Deployment**: Vercel

## âš™ï¸ ì„¤ì • ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ìŠ¤í¬ë˜í•‘ ì„¤ì •

`backend/scraper.py`ì—ì„œ ë‹¤ìŒ í•­ëª©ë“¤ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
URL = "https://www.christiantoday.co.kr/sections/pd_19"  # ëŒ€ìƒ URL
HEADERS = {
    'User-Agent': '...'  # User-Agent í—¤ë”
}
```

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

`backend/db.py`ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ ë° í…Œì´ë¸” êµ¬ì¡°ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
DB_PATH = "articles.db"  # ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ ê²½ë¡œ
```

## ğŸ”„ ìë™í™” ì„¤ì •

### Render Cron Jobs (ê¶Œì¥)

Render ëŒ€ì‹œë³´ë“œì—ì„œ ì •ê¸°ì ì¸ ê¸°ì‚¬ í™•ì¸ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. Render í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œ ì ‘ì†
2. "Settings" â†’ "Cron Jobs"
3. ìƒˆ í¬ë¡  ì¡ ì¶”ê°€:
   - Command: `curl https://your-service-name.onrender.com/check`
   - Schedule: `0 */6 * * *` (6ì‹œê°„ë§ˆë‹¤)

### ì™¸ë¶€ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤

UptimeRobot, Cron-job.org ë“±ì˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ê¸°ì ìœ¼ë¡œ `/check` ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

1. **ìŠ¤í¬ë˜í•‘ ì‹¤íŒ¨**
   - ëŒ€ìƒ ì›¹ì‚¬ì´íŠ¸ì˜ êµ¬ì¡°ê°€ ë³€ê²½ë˜ì—ˆì„ ìˆ˜ ìˆìŒ
   - `backend/scraper.py`ì˜ ì„ íƒì(selector)ë¥¼ í™•ì¸í•˜ê³  ì—…ë°ì´íŠ¸

2. **CORS ì˜¤ë¥˜**
   - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ API í˜¸ì¶œì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°
   - `frontend/script.js`ì˜ `API_BASE_URL`ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸

3. **ë°°í¬ ì‹¤íŒ¨**
   - Render/Vercel ì„¤ì • íŒŒì¼ í™•ì¸
   - Python ë²„ì „ ë° ì˜ì¡´ì„± í™•ì¸

### ë¡œê·¸ í™•ì¸

```bash
# ë°±ì—”ë“œ ë¡œì»¬ ë¡œê·¸
cd backend
python -m uvicorn api.index:app --reload --log-level info

# í”„ë¡ íŠ¸ì—”ë“œ ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ JavaScript ì˜¤ë¥˜ í™•ì¸
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§

- **ê±´ê°• ìƒíƒœ**: `GET /health` ì—”ë“œí¬ì¸íŠ¸ë¡œ ì„œë²„ ìƒíƒœ í™•ì¸
- **í†µê³„ ì •ë³´**: `GET /stats` ì—”ë“œí¬ì¸íŠ¸ë¡œ ì €ì¥ëœ ê¸°ì‚¬ ìˆ˜ í™•ì¸
- **ìµœê·¼ ê¸°ì‚¬**: `GET /latest` ì—”ë“œí¬ì¸íŠ¸ë¡œ ìµœê·¼ í™œë™ í™•ì¸

## ğŸ¤ ê¸°ì—¬

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ì œê³µë©ë‹ˆë‹¤.

## ğŸ™ ê°ì‚¬ì˜ ë§

- Christian Todayì˜ ë‹¤ë‹ˆì—˜ê¸°ë„íšŒ ì½˜í…ì¸  ì œê³µ
- FastAPI, BeautifulSoup4 ë“±ì˜ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œìë“¤

---

**ë¬¸ì˜ì‚¬í•­**: ì´ìŠˆ íŠ¸ë˜ì»¤ë¥¼ í†µí•´ ë²„ê·¸ ë¦¬í¬íŠ¸ ë˜ëŠ” ê¸°ëŠ¥ ìš”ì²­ì„ ë‚¨ê²¨ì£¼ì„¸ìš”.
